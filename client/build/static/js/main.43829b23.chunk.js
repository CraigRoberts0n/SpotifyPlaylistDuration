(this["webpackJsonpspotify-project"]=this["webpackJsonpspotify-project"]||[]).push([[0],{126:function(e,t,a){},127:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(9),c=a.n(o),i=a(11),l=a(25),s=a.n(l),u=a(78),m=function(e){var t=Math.floor(e/6e4),a=(e%6e4/1e3).toFixed(0);return 60===a?t+1+":00":t+":"+(a<10?"0":"")+a},d=a(79),g=a(174),h=a(177),p=a(179),f=a(30),E=a(82),b=a.n(E),y=a(180),v=function(e){var t=e.setDrawerOpen,a=e.checkedSongs,n=e.userID,o=e.flag,c=Object(g.a)((function(e){return{toolbar:{minHeight:"7vh",alignItems:"flex-start",paddingTop:"1vh"},title:{flexGrow:1,alignSelf:"flex-start"},totalDuration:Object(u.a)({justifyContent:"center",fontSize:"1.7rem"},e.breakpoints.down("xs"),{fontSize:"1.5rem"}),appBar:{backgroundColor:"#1DB954"}}}))();return r.a.createElement(h.a,{position:"sticky",style:{backgroundColor:"#1DB954"}},r.a.createElement(p.a,{className:c.toolbar},r.a.createElement(y.a,{edge:"start",className:c.menuButton,color:"inherit","aria-label":"open drawer",onClick:function(){return t(!0)}},r.a.createElement(b.a,null)),r.a.createElement(f.a,{className:c.title,variant:"h5"},n," ",o&&r.a.createElement(d.a,{countryCode:o,svg:!0})),r.a.createElement(f.a,{className:c.totalDuration,variant:"h4"},a.length>0&&"Duration: "+m(a.reduce((function(e,t){return e+t.duration}),0)))))},S=a(43),k=a(202),O=a(83),j=a.n(O),C=a(181),w=a(182),x=a(184),B=a(183),D=a(186),I=a(185),P=a(203),z=a(84),L=a.n(z),N=a(188),A=a(187),R=function(e){var t=e.drawerOpen,a=e.setDrawerOpen,n=e.checkedSongs,o=e.setCheckedSongs;return r.a.createElement(k.a,{anchor:"left",open:t,onClose:function(){return a(!1)}},r.a.createElement(y.a,{onClick:function(){return a(!1)}},r.a.createElement(j.a,null)),r.a.createElement(C.a,null),r.a.createElement(w.a,{style:{minWidth:"auto",marginLeft:5},subheader:r.a.createElement("li",null)},n.length>0&&r.a.createElement(B.a,null,"Click song to delete"),n.map((function(e){return r.a.createElement(x.a,{button:!0,key:e.id,name:e.id,onClick:function(e){return function(e){var t=Object(S.a)(n),a=t.map((function(e){return e.id})).indexOf(e.target.getAttribute("name"));a>=0&&t.splice(a,1),o(t)}(e)}},r.a.createElement(I.a,{style:{pointerEvents:"none"}},r.a.createElement(P.a,{alt:e.songName,src:e.albumCover,style:{pointerEvents:"none"}})),r.a.createElement(D.a,{primary:e.songName,secondary:e.artist,style:{pointerEvents:"none"}}),r.a.createElement(y.a,{style:{pointerEvents:"none"}},r.a.createElement(L.a,{style:{pointerEvents:"none"}})))})),0===n.length&&r.a.createElement(x.a,null,r.a.createElement(D.a,{primary:"Select Songs to Begin"})),r.a.createElement(C.a,null),0!==n.length&&r.a.createElement(r.a.Fragment,null,r.a.createElement(x.a,null,r.a.createElement(A.a,{variant:"contained",color:"secondary",onClick:function(){!function(){var e=Object(S.a)(n);e.length=0,o(e)}()}},"Remove all Songs")),r.a.createElement(C.a,null)),r.a.createElement(x.a,null,r.a.createElement(N.a,{href:"https://github.com/CraigRoberts0n"},r.a.createElement(D.a,{primary:"Github: https://github.com/CraigRoberts0n"})))))},M=a(199),_=a(189),F=a(193),T=a(191),W=a(190),J=a(201),Q=a(192),q=a(200),G=function(e){var t=e.checkedSongs,a=e.token,o=e.userID,c=e.setAppErrorMessage,l=Object(n.useState)(!1),u=Object(i.a)(l,2),m=u[0],d=u[1],g=Object(n.useState)(""),h=Object(i.a)(g,2),p=h[0],f=h[1],E=Object(n.useState)(""),b=Object(i.a)(E,2),y=b[0],v=b[1],S=Object(n.useState)(!1),k=Object(i.a)(S,2),O=k[0],j=k[1],C=Object(n.useState)(""),w=Object(i.a)(C,2),x=w[0],B=w[1],D=function(){d(!1)},I=function(e){s.a.post("https://api.spotify.com/v1/users/".concat(o,"/playlists"),e,{headers:{Authorization:"Bearer "+a}}).then((function(e){console.log(e),s.a.post("https://api.spotify.com/v1/playlists/".concat(e.data.id,"/tracks"),{uris:t.map((function(e){return e.uri}))},{headers:{Authorization:"Bearer "+a}}).then((function(e){console.log(e),d(!1),c({variant:"success",message:"Playlist creation Success!"})}))})).catch((function(e){c({variant:"error",message:"Playlist creation Failed: ".concat(e.response.data.error.message)})}))};return r.a.createElement("div",{style:{marginBottom:6}},r.a.createElement(A.a,{variant:"outlined",color:"primary",onClick:function(){0===t.length?c({variant:"error",message:"Please Select Some Songs"}):(c({variant:"",message:""}),d(!0))}},"Save to Playlist"),r.a.createElement(_.a,{open:m,onClose:D,"aria-labelledby":"form-dialog-title"},x&&r.a.createElement(q.a,{severity:"error"},x),r.a.createElement(W.a,{id:"form-dialog-title"},"Save Selected Items to a Playlist"),r.a.createElement(T.a,null,r.a.createElement(M.a,{autoFocus:!0,margin:"dense",id:"name",label:"Playlist Name",type:"text",fullWidth:!0,onChange:function(e){return f(e.target.value)}}),r.a.createElement(M.a,{autoFocus:!0,margin:"dense",id:"description",label:"Description",type:"text",fullWidth:!0,onChange:function(e){return v(e.target.value)}}),r.a.createElement(Q.a,{control:r.a.createElement(J.a,{checked:O,onChange:function(e){j(e.target.checked)},inputProps:{"aria-label":"primary checkbox"}}),label:"Public?",labelPlacement:"start",style:{marginLeft:"0px"}})),r.a.createElement(F.a,null,r.a.createElement(A.a,{onClick:D,color:"primary"},"Cancel"),r.a.createElement(A.a,{onClick:function(){p?I({name:p,description:y,public:O}):B("Please give the playlist a name!")},color:"primary"},"Save Playlist"))))},U=a(194),H=function(e){var t=e.token,a=e.checkedSongs,n=e.userID,o=e.setAppErrorMessage,c=e.setDrawerOpen,i=e.searchResults,l=e.setSearchResults,u=e.searchQuery,m=e.setSearchQuery;return r.a.createElement(r.a.Fragment,null,t&&r.a.createElement(U.a,{container:!0,style:{padding:10}},r.a.createElement(U.a,{item:!0,xs:6,md:2},r.a.createElement(G,{token:t,checkedSongs:a,userID:n,setAppErrorMessage:o})),r.a.createElement(U.a,{item:!0,xs:6,md:2},r.a.createElement(A.a,{variant:"outlined",color:"primary",onClick:function(){return c(!0)}},"Show Selected")),r.a.createElement(U.a,{item:!0,xs:6,md:4},i.length>0&&r.a.createElement(A.a,{variant:"outlined",color:"primary",onClick:function(){l([])},style:{marginBottom:6}},"Back to Library")),r.a.createElement(U.a,{item:!0,xs:12,md:4},r.a.createElement(U.a,{container:!0},r.a.createElement(U.a,{item:!0,xs:7,md:5},r.a.createElement(M.a,{id:"outlined-basic",label:"Search...",size:"small",variant:"outlined",onChange:function(e){return m(e.target.value)},style:{marginTop:2}})),r.a.createElement(U.a,{item:!0,xs:5,md:7},r.a.createElement(A.a,{variant:"outlined",color:"primary",style:{height:40,margin:2},onClick:function(){return function(e){e?s.a.get("https://api.spotify.com/v1/search?q=".concat(e,"&type=track"),{headers:{Authorization:"Bearer "+t}}).then((function(e){var t=e.data.tracks.items;l(t)})).catch((function(e){console.log(e.response),o({variant:"error",message:"".concat(e.response.data.error.message)})})):o({variant:"error",message:"Please supply search query"})}(u)}},"Search Song"))))))},V=window.location.href.split("/"),$="".concat(V[0],"//").concat(V[2],"/callback"),K=["user-library-read","playlist-modify-public","playlist-modify-private","user-read-private","user-read-email"],X=function(){return r.a.createElement("div",{style:{backgroundImage:"url(./landingImage.jpg)",height:"92vh"},className:"landing"},r.a.createElement("div",{style:{backgroundColor:"rgba(50,50,50, 0.5)",backgroundClip:"content-box"},className:"landingTransparent"},r.a.createElement("div",{className:"landingInfo"},r.a.createElement(f.a,{variant:"h1",gutterBottom:!0,style:{fontSize:"2.75rem",fontWeight:"normal",color:"white"}},"Spotify Playlist Duration Tool"),r.a.createElement(f.a,{variant:"h2",component:"h2",gutterBottom:!0,style:{fontSize:"1.5rem",color:"white",paddingBottom:"1vh"}},"Create a Spotify playlist with the overall duration you require."),r.a.createElement(f.a,{variant:"h3",component:"h3",gutterBottom:!0,style:{fontSize:"1.0rem",color:"white",paddingBottom:"2vh"}},"- View User Library ",r.a.createElement("br",null),"- Search Songs ",r.a.createElement("br",null),"- Select Songs ",r.a.createElement("br",null),"- Save Songs to Spotify Playlist ",r.a.createElement("br",null)),r.a.createElement(f.a,{variant:"h4",component:"h4",gutterBottom:!0,style:{fontSize:"1.25rem",color:"white"}},"Login To Spotify to Continue"),r.a.createElement(A.a,{href:"".concat("https://accounts.spotify.com/authorize","?client_id=").concat("f5200adfddfd40869e0cc7da942bb413","&redirect_uri=").concat($,"&scope=").concat(K.join("%20"),"&response_type=token&show_dialog=true"),variant:"contained",color:"primary",style:{marginTop:10,display:"flex",justifyContent:"center",height:50,backgroundColor:"rgb(29, 185, 84)"}},"Login"))))},Y=a(195),Z=a(198),ee=a(197),te=a(196),ae=function(e){var t=e.identifier,a=e.uri,o=e.song,c=e.artist,l=e.duration,s=e.albumCover,u=e.checkedSongs,d=e.setCheckedSongs,g=Object(n.useState)(!1),h=Object(i.a)(g,2),p=h[0],E=h[1];Object(n.useEffect)((function(){u.some((function(e){return e.id===t}))?E(!0):E(!1)}),[u,t]);var b=function(e){if(E(e),e){var n={id:t,songName:o,uri:a,artist:c,duration:l,albumCover:s},r=u.concat(n);d(r)}else{var i=Object(S.a)(u),m=i.map((function(e){return e.id})).indexOf(t);m>=0&&i.splice(m,1),d(i)}};return r.a.createElement(U.a,{item:!0,component:Y.a,xs:5,md:2,key:t,variant:"outlined",style:{margin:"0 1%",marginBottom:"1%"}},r.a.createElement(te.a,{onClick:function(){return b(!p)}},r.a.createElement(J.a,{checked:p,onChange:function(){return b(!p)},inputProps:{"aria-label":"primary checkbox"}}),r.a.createElement(ee.a,{component:"img",image:s}),r.a.createElement(Z.a,null,r.a.createElement(f.a,{variant:"h6"},o),r.a.createElement(f.a,{variant:"body2",component:"p"},c),r.a.createElement(f.a,{variant:"body2",component:"p"},"Duration: ",m(l)))))},ne=function(e){var t=e.userLibrary,a=e.checkedSongs,n=e.setCheckedSongs,o=e.token,c=e.loadMoreLibrary,i=e.searchResults;return r.a.createElement("div",null,r.a.createElement(U.a,{container:!0,spacing:0,justify:"center"},i.length>0?i.map((function(e){return r.a.createElement(ae,{song:e.name,artist:e.artists[0].name,albumCover:e.album.images[1].url,duration:e.duration_ms,identifier:e.id,checkedSongs:a,setCheckedSongs:n,uri:e.uri,key:e.id})})):t.map((function(e){return r.a.createElement(ae,{song:e.track.name,artist:e.track.artists[0].name,albumCover:e.track.album.images[1].url,duration:e.track.duration_ms,identifier:e.track.id,checkedSongs:a,setCheckedSongs:n,uri:e.track.uri,key:e.track.id})})),!i.length>0&&o&&r.a.createElement(A.a,{variant:"contained",color:"primary",onClick:c},"Load More")))},re=window.location.hash.substring(1).split("&").reduce((function(e,t){if(t){var a=t.split("=");e[a[0]]=decodeURIComponent(a[1])}return e}),{});a(126);var oe=function(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(""),l=Object(i.a)(c,2),u=l[0],m=l[1],d=Object(n.useState)(""),g=Object(i.a)(d,2),h=g[0],p=g[1],f=Object(n.useState)([]),E=Object(i.a)(f,2),b=E[0],y=E[1],S=Object(n.useState)([]),k=Object(i.a)(S,2),O=k[0],j=k[1],C=Object(n.useState)(""),w=Object(i.a)(C,2),x=w[0],B=w[1],D=Object(n.useState)([]),I=Object(i.a)(D,2),P=I[0],z=I[1],L=Object(n.useState)(""),N=Object(i.a)(L,2),A=N[0],M=N[1],_=Object(n.useState)({variant:"",message:""}),F=Object(i.a)(_,2),T=F[0],W=F[1],J=Object(n.useState)(!1),Q=Object(i.a)(J,2),G=Q[0],U=Q[1];Object(n.useEffect)((function(){var e=re.access_token;if(e){o(e);var t=JSON.parse(localStorage.getItem("checkedLocalStore"));t&&j(t)}}),[]),Object(n.useEffect)((function(){localStorage.setItem("checkedLocalStore",JSON.stringify(O))}),[O]),Object(n.useEffect)((function(){a&&(V(),$())}),[a]);var V=function(){s.a.get("https://api.spotify.com/v1/me",{headers:{Authorization:"Bearer "+a}}).then((function(e){var t=e.data;m(t.id),p(t.country)})).catch((function(e){console.log(e.response),W({variant:"error",message:"".concat(e.response.data.error.message)}),o("")}))},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"https://api.spotify.com/v1/me/tracks";s.a.get(e,{headers:{Authorization:"Bearer "+a}}).then((function(e){var t=e.data,a=t.items,n=t.next;B(n);var r=b.concat(a);y(r)})).catch((function(e){console.log(e.response)}))};return r.a.createElement("div",null,r.a.createElement(v,{setDrawerOpen:U,checkedSongs:O,userID:u,flag:h}),r.a.createElement(R,{drawerOpen:G,setDrawerOpen:U,checkedSongs:O,setCheckedSongs:j}),r.a.createElement(H,{token:a,checkedSongs:O,userID:u,setAppErrorMessage:W,setDrawerOpen:U,searchResults:P,setSearchResults:z,searchQuery:A,setSearchQuery:M}),T.message&&r.a.createElement(q.a,{onClose:function(){return W({variant:"",message:""})},severity:T.variant},T.message),r.a.createElement(ne,{userLibrary:b,checkedSongs:O,setCheckedSongs:j,token:a,loadMoreLibrary:function(){$(x)},searchResults:P}),!a&&r.a.createElement(X,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(oe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},98:function(e,t,a){e.exports=a(127)}},[[98,1,2]]]);
//# sourceMappingURL=main.43829b23.chunk.js.map